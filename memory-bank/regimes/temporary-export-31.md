# Режим ВРЕМЕННЫЙ ВЫВОЗ (код 31, направление ЭК) — Прогресс реализации

> **Последнее обновление:** 2026-02-07
> **Статус:** ✅ Реализован (на базе Экспорта с отличиями)
> **Источник правил:** `.cursor/rules/gtd-temporary-export-31.mdc`

## Основная информация

- **Код режима:** 31
- **Аббревиатура:** ВВЗ
- **Направление:** ЭК (вывоз из РУз — временное использование за рубежом)
- **Базовые правила:** по экспорту (пункт 22)
- **Обратная операция (§2):** Реимпорт (код 41)

## Ключевые отличия от Экспорта (код 10)

| Аспект | Экспорт (10) | Временный вывоз (31/ЭК) |
|--------|--------------|--------------------------|
| Код режима | 10 | 31 |
| Графа 9 | Общие правила | ⭐ Лицо с разрешением на временный вывоз |
| Графа 15/15a | UZ (readonly) | НЕ заполняется |
| Графа 21 | Отключена | ЗАПОЛНЯЕТСЯ |
| Графа 36 | Отключена | ЗАПОЛНЯЕТСЯ (0 при частичном освобождении) |
| Графа 39 | Условная | НЕ заполняется |
| Графа 44 | 11 кодов | + код 303 (договор аренды) |
| Графа 47 СП | ОО/ВЗ/БН | **УН** (условное начисление) пошлина+НДС, БН сбор |
| Графа 48 | Условная | НЕ заполняется |
| Графа 50 | Доверитель | + обязательство с датой обратного ввоза |
| Графа «B» | Не заполняется | ЗАПОЛНЯЕТСЯ |

## Отключённые графы

```typescript
disabledGraphs: ['4', '6', '10', '16', '27', '39', '48', '51', '52', '53']
// + 15/15a через спец. условие в UI (НЕ заполняется)
```

## Реализованные изменения

### CUSTOMS_REGIMES
- code: '31' (исправлено с '12')
- abbr: 'ВВЗ'
- direction: 'ЭК'

### REGIME_CONFIGS
- autoFill: exporterCountry='UZ' (БЕЗ dispatchCountry — гр.15 не заполняется)
- disabledGraphs: ['4', '6', '10', '16', '27', '39', '48', '51', '52', '53']
- hints: graph2 (экспортер), graph8 (получатель), graph9 (⭐ лицо с разрешением)

### Графа 1 — Тип декларации
- direction: ЭК, code: 31 ✅

### Графа 9 — Подсказка
- '⭐ Лицо, получившее разрешение на временный вывоз товаров' ✅

### Графа 15/15a — НЕ заполняется
- Спец. условие: `declarationType === 'Временный вывоз'` → "Не заполняется" ✅
- Стиль: bg-gray-100 opacity-50 ✅

### Графа 21 — Транспорт на границе
- НЕ в disabledGraphs → заполняется ✅
- Условие блокировки только для 'Экспорт' и 'Реэкспорт' ✅

### Графа 36 — Преференция
- НЕ в disabledGraphs → заполняется ✅
- Поддержка '0' при частичном освобождении через PREFERENCE_CODES ✅

### Графа 37 — Процедура
- XX=31 (авто из кода режима) ✅
- YY — ModalSelect с 3 вариантами: ✅
  - 00 — Первичный временный вывоз
  - 40 — Ранее импортированный товар
  - 10 — После экспорта (редко)

### Графа 44 — Документы
- Добавлен код 303 (АРЕНД — Договор аренды) для 'Временный вывоз' ✅
- Tooltip обновлён с ⭐ 303 ✅

### Графа 47 — Платежи
- isExport включает 'Временный вывоз' (0% пошлина, 0% НДС) ✅
- Ставки: 0% пошлина, 0% НДС ✅
- По умолчанию: feePaymentMethod='БН', dutyPaymentMethod='УН', vatPaymentMethod='УН' ✅
- Tooltip'ы обновлены: "Условное начисление (УН)" ✅

### Графа 50 — Доверитель + обязательство
- Стандартная часть: ФИО, ПИНФЛ/ИНН, копирование из Гр.2/Гр.14 ✅
- ⭐ Обязательство обратного ввоза (только для 'Временный вывоз'):
  - Текстовое поле с placeholder: "Обязуюсь ввезти товары обратно..." ✅
  - Поле даты "Срок до: ДД.ММ.ГГГГ" ✅
  - Кнопка "Авто" для генерации текста ✅
  - Стиль: оранжевая рамка, bg-orange-50 ✅

### Графа «B» — Подробности подсчёта
- Уже отображается для всех режимов ✅

### Графа «C»
- Tooltip обновлён для 'Временный вывоз' ✅

## Также исправлено

- **CUSTOMS_REGIMES**: 'Временный вывоз' code='12'→'31', 'Временный ввоз' code='42'→'31'
